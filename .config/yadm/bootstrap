#!/bin/bash

cd "$HOME"
yadm submodule update --recursive --init

# permissions
chmod 700 ~/.cache ~/.config

# sparse checkout
yadm gitconfig core.sparseCheckout true
cat << EOF > "$HOME/.config/yadm/repo.git/info/sparse-checkout"
# generated by $0
/*
!README.md
!UNLICENSE
EOF
yadm checkout --quiet
